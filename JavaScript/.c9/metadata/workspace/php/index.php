{"filter":false,"title":"index.php","tooltip":"/php/index.php","undoManager":{"mark":66,"position":66,"stack":[[{"group":"doc","deltas":[{"start":{"row":14,"column":0},"end":{"row":15,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":0},"end":{"row":19,"column":1},"action":"insert","lines":["public static function fullname {","   \tif(strlen($username) < 4 || strlen($username) > 30) {","\t\treturn $errorMessage = $errorMessage . \"Namnet måste vara mellan 4 och 30 tecken långt\" . \"<br>\";","\t}","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":0},"end":{"row":15,"column":13},"action":"remove","lines":["public static"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":0},"end":{"row":15,"column":1},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":17},"end":{"row":15,"column":19},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":0},"end":{"row":19,"column":1},"action":"remove","lines":["function fullname() {","   \tif(strlen($username) < 4 || strlen($username) > 30) {","\t\treturn $errorMessage = $errorMessage . \"Namnet måste vara mellan 4 och 30 tecken långt\" . \"<br>\";","\t}","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":0},"end":{"row":15,"column":1},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":1},"end":{"row":15,"column":2},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":2},"end":{"row":15,"column":3},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":3},"end":{"row":15,"column":4},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":4},"end":{"row":15,"column":5},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":5},"end":{"row":15,"column":6},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":6},"end":{"row":15,"column":7},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":7},"end":{"row":15,"column":8},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":8},"end":{"row":15,"column":9},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":9},"end":{"row":15,"column":10},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":10},"end":{"row":15,"column":11},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":11},"end":{"row":15,"column":12},"action":"insert","lines":["j"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":12},"end":{"row":15,"column":14},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":14},"end":{"row":15,"column":15},"action":"insert","lines":["{"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":15},"end":{"row":15,"column":16},"action":"insert","lines":["}"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":15},"end":{"row":17,"column":0},"action":"insert","lines":["","\t",""]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":1},"end":{"row":16,"column":2},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":2},"end":{"row":16,"column":3},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":3},"end":{"row":16,"column":4},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":4},"end":{"row":16,"column":5},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":5},"end":{"row":16,"column":6},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":6},"end":{"row":16,"column":7},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":1},"end":{"row":16,"column":7},"action":"remove","lines":["return"]},{"start":{"row":16,"column":1},"end":{"row":16,"column":2},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":2},"end":{"row":16,"column":3},"action":"insert","lines":["x"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":3},"end":{"row":16,"column":4},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":4},"end":{"row":16,"column":5},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":4},"end":{"row":16,"column":5},"action":"remove","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":3},"end":{"row":16,"column":4},"action":"remove","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":2},"end":{"row":16,"column":3},"action":"remove","lines":["x"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":1},"end":{"row":16,"column":2},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":0},"end":{"row":16,"column":1},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":15},"end":{"row":16,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":14},"end":{"row":15,"column":15},"action":"remove","lines":["{"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":13},"end":{"row":15,"column":14},"action":"remove","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":12},"end":{"row":15,"column":13},"action":"remove","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":11},"end":{"row":15,"column":12},"action":"remove","lines":["j"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":10},"end":{"row":15,"column":11},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":0},"end":{"row":16,"column":1},"action":"remove","lines":["function h","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":0},"end":{"row":19,"column":1},"action":"insert","lines":["function fullname() {","   \tif(strlen($username) < 4 || strlen($username) > 30) {","\t\treturn $errorMessage = $errorMessage . \"Namnet måste vara mellan 4 och 30 tecken långt\" . \"<br>\";","\t}","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":2},"end":{"row":17,"column":9},"action":"remove","lines":["return "]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":0},"end":{"row":19,"column":1},"action":"remove","lines":["function fullname() {","   \tif(strlen($username) < 4 || strlen($username) > 30) {","\t\t$errorMessage = $errorMessage . \"Namnet måste vara mellan 4 och 30 tecken långt\" . \"<br>\";","\t}","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":0},"end":{"row":18,"column":11},"action":"insert","lines":["function writeMsg() {","    echo \"Hello world!\";","}","","writeMsg();"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":0},"end":{"row":18,"column":11},"action":"remove","lines":["function writeMsg() {","    echo \"Hello world!\";","}","","writeMsg();"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":0},"end":{"row":13,"column":3},"action":"remove","lines":["","// hämta person nummer","require_once 'FI.php';","","// function till säkerhet","/*function cleanMe($input) {","   $input = mysql_real_escape_string($input);","   $input = htmlspecialchars($input);","   $input = strip_tags($input);","   $input = stripslashes($input);","   return $input;","}*/"]},{"start":{"row":2,"column":0},"end":{"row":99,"column":1},"action":"insert","lines":["class Pnum {","   public static function checksum($pnum) {","      $pnum = self::filter($pnum);","      $len = strlen($pnum);","      if($len == 10) {","         $pnum = substr($pnum, 0, 9);","      }elseif($len > 10) {","         return false;","      }","","      $checksum = 0;","      $onetwo = 1;","      for($i = 0; $i < 9; $i++) {","         $onetwo = $onetwo==1?2:1;","         $tmp = $pnum[$i] * $onetwo;","         if($tmp > 9) {","            $tmp = $tmp - 10 + 1;","         }","         $checksum += $tmp;","      }","      $checksum %= 10;","      if($checksum != 0) {","         $checksum = 10 - $checksum;","      }","      return $checksum;","   }","","   public static function check($pnum, $personal_only = true) {","      $pnum = self::filter($pnum);","      $len = strlen($pnum);","      if($len != 10) {","         return false;","      }","","      if($personal_only && ($pnum[2] > 1 || !self::datecheck($pnum)) ) {","         return false;","      }","","      return self::checksum($pnum) == $pnum[$len-1];","   }","","   public static function datecheck($pnum) {","      $pnum = self::filter($pnum);","      $date = substr($pnum, 0, 6);","      $y = substr($date, 0, 2);","      $m = substr($date, 2, 2);","      $d = substr($date, 4, 2);","      $date = \"19$y-$m-$d\";","      return $date == date('Y-m-d', strtotime($date));","   }","","   public static function gender($pnum) {","      $pnum = self::filter($pnum);","      if(!self::check($pnum, true)) {","         return false;","      }","      return ($pnum[8] % 2) ? 1 : 2;","   }","","   public static function ispersonal($pnum) {","      $pnum = self::filter($pnum);","      return self::check($pnum, true);","   }","","   public static function iscompany($pnum) {","      $pnum = self::filter($pnum);","      return !($pnum[2] < 2 || !self::check($pnum, false));","   }","","   public static function company($pnum) {","      $pnum = self::filter($pnum);","      if(!self::iscompany($pnum)) {","         return false;","      }","      switch($pnum[0]) {","      case 2:","         return 'OF';","      case 5:","         return 'AB';","      case 7:","         return 'EK';","      case 8:","         return 'IF';","      case 9:","         return 'HB';","      default:","         return true;","      }","   }","","   public static function filter($pnum) {","      $pnum = preg_replace('/[^0-9]/', '', $pnum);","      if(strlen($pnum) > 10 && $pnum[0] <= 2) {","         $pnum = substr($pnum, 2);","      }","      return $pnum;","   }","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":0},"end":{"row":5,"column":16},"action":"insert","lines":[""," * AUTHORS"," * ======="," *"," * Emil Vikstrom"]}]}],[{"group":"doc","deltas":[{"start":{"row":5,"column":0},"end":{"row":5,"column":3},"action":"remove","lines":[" * "]}]}],[{"group":"doc","deltas":[{"start":{"row":3,"column":9},"end":{"row":5,"column":0},"action":"remove","lines":["="," *",""]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":10},"end":{"row":3,"column":9},"action":"remove","lines":[""," * ======"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":10},"end":{"row":2,"column":11},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":1},"end":{"row":2,"column":3},"action":"remove","lines":["* "]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":0},"end":{"row":2,"column":1},"action":"remove","lines":[" "]},{"start":{"row":2,"column":0},"end":{"row":2,"column":2},"action":"insert","lines":["//"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":0},"end":{"row":2,"column":23},"action":"remove","lines":["//AUTHORS Emil Vikstrom"]}]}],[{"group":"doc","deltas":[{"start":{"row":208,"column":2},"end":{"row":217,"column":2},"action":"insert","lines":["","","<?php","require_once(dirname(__FILE__) . '/simpletest/autorun.php');","","class TestOfLogging extends UnitTestCase {","    function testFirstLogMessagesCreatesFileIfNonexistent() {","    }","}","?>"]}]}],[{"group":"doc","deltas":[{"start":{"row":217,"column":2},"end":{"row":230,"column":2},"action":"insert","lines":["","<?php","require_once(dirname(__FILE__) . '/simpletest/autorun.php');","require_once('../classes/log.php');","","class TestOfLogging extends UnitTestCase {","    function testFirstLogMessagesCreatesFileIfNonexistent() {","        @unlink(dirname(__FILE__) . '/../temp/test.log');","        $log = new Log(dirname(__FILE__) . '/../temp/test.log');","        $log->message('Should write this to a file');","        $this->assertTrue(file_exists(dirname(__FILE__) . '/../temp/test.log'));","    }","}","?>"]}]}],[{"group":"doc","deltas":[{"start":{"row":211,"column":0},"end":{"row":217,"column":2},"action":"remove","lines":["require_once(dirname(__FILE__) . '/simpletest/autorun.php');","","class TestOfLogging extends UnitTestCase {","    function testFirstLogMessagesCreatesFileIfNonexistent() {","    }","}","?>"]}]}],[{"group":"doc","deltas":[{"start":{"row":209,"column":0},"end":{"row":211,"column":0},"action":"remove","lines":["","<?php",""]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":0},"end":{"row":2,"column":23},"action":"insert","lines":[" * AUTHORSEmil Vikstrom"]},{"start":{"row":208,"column":2},"end":{"row":222,"column":2},"action":"remove","lines":["","","<?php","require_once(dirname(__FILE__) . '/simpletest/autorun.php');","require_once('../classes/log.php');","","class TestOfLogging extends UnitTestCase {","    function testFirstLogMessagesCreatesFileIfNonexistent() {","        @unlink(dirname(__FILE__) . '/../temp/test.log');","        $log = new Log(dirname(__FILE__) . '/../temp/test.log');","        $log->message('Should write this to a file');","        $this->assertTrue(file_exists(dirname(__FILE__) . '/../temp/test.log'));","    }","}","?>"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":10},"end":{"row":3,"column":6},"action":"insert","lines":[""," * ==="]}]}],[{"group":"doc","deltas":[{"start":{"row":3,"column":6},"end":{"row":4,"column":1},"action":"insert","lines":["===="," "]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":1},"end":{"row":5,"column":3},"action":"insert","lines":["*"," * "]},{"start":{"row":2,"column":0},"end":{"row":5,"column":16},"action":"remove","lines":[" * AUTHORS"," * ======="," *"," * Emil Vikstrom"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":0},"end":{"row":2,"column":0},"action":"remove","lines":["",""]},{"start":{"row":2,"column":0},"end":{"row":99,"column":1},"action":"remove","lines":["class Pnum {","   public static function checksum($pnum) {","      $pnum = self::filter($pnum);","      $len = strlen($pnum);","      if($len == 10) {","         $pnum = substr($pnum, 0, 9);","      }elseif($len > 10) {","         return false;","      }","","      $checksum = 0;","      $onetwo = 1;","      for($i = 0; $i < 9; $i++) {","         $onetwo = $onetwo==1?2:1;","         $tmp = $pnum[$i] * $onetwo;","         if($tmp > 9) {","            $tmp = $tmp - 10 + 1;","         }","         $checksum += $tmp;","      }","      $checksum %= 10;","      if($checksum != 0) {","         $checksum = 10 - $checksum;","      }","      return $checksum;","   }","","   public static function check($pnum, $personal_only = true) {","      $pnum = self::filter($pnum);","      $len = strlen($pnum);","      if($len != 10) {","         return false;","      }","","      if($personal_only && ($pnum[2] > 1 || !self::datecheck($pnum)) ) {","         return false;","      }","","      return self::checksum($pnum) == $pnum[$len-1];","   }","","   public static function datecheck($pnum) {","      $pnum = self::filter($pnum);","      $date = substr($pnum, 0, 6);","      $y = substr($date, 0, 2);","      $m = substr($date, 2, 2);","      $d = substr($date, 4, 2);","      $date = \"19$y-$m-$d\";","      return $date == date('Y-m-d', strtotime($date));","   }","","   public static function gender($pnum) {","      $pnum = self::filter($pnum);","      if(!self::check($pnum, true)) {","         return false;","      }","      return ($pnum[8] % 2) ? 1 : 2;","   }","","   public static function ispersonal($pnum) {","      $pnum = self::filter($pnum);","      return self::check($pnum, true);","   }","","   public static function iscompany($pnum) {","      $pnum = self::filter($pnum);","      return !($pnum[2] < 2 || !self::check($pnum, false));","   }","","   public static function company($pnum) {","      $pnum = self::filter($pnum);","      if(!self::iscompany($pnum)) {","         return false;","      }","      switch($pnum[0]) {","      case 2:","         return 'OF';","      case 5:","         return 'AB';","      case 7:","         return 'EK';","      case 8:","         return 'IF';","      case 9:","         return 'HB';","      default:","         return true;","      }","   }","","   public static function filter($pnum) {","      $pnum = preg_replace('/[^0-9]/', '', $pnum);","      if(strlen($pnum) > 10 && $pnum[0] <= 2) {","         $pnum = substr($pnum, 2);","      }","      return $pnum;","   }","}"]},{"start":{"row":2,"column":0},"end":{"row":13,"column":3},"action":"insert","lines":["","// hämta person nummer","require_once 'FI.php';","","// function till säkerhet","/*function cleanMe($input) {","   $input = mysql_real_escape_string($input);","   $input = htmlspecialchars($input);","   $input = strip_tags($input);","   $input = stripslashes($input);","   return $input;","}*/"]}]}]]},"ace":{"folds":[],"scrolltop":1377,"scrollleft":0,"selection":{"start":{"row":27,"column":8},"end":{"row":27,"column":8},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":97,"state":"start","mode":"ace/mode/php"}},"timestamp":1418745780000,"hash":"d09c021629a2185d86a881a5e1a8afce4376c998"}